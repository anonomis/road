// Generated by CoffeeScript 1.6.2
(function() {
  var Edge, Node, Road, root;

  root = this;

  Node = (function() {
    function Node(pos, target) {
      this.pos = pos;
      this.target = target;
      this.handels = [this.target];
      this.line = L(this.target, this.pos);
      this.ctrl = this.line.growAdd(50).p1;
      if (nodes[this.pos.x] == null) {
        root.nodes[this.pos.x] = [];
      }
      root.nodes[this.pos.x][this.pos.y] = this;
      layers.node.drawNode(this);
      layers.nodeSnap.addNodeSnapper(this);
    }

    Node.prototype.addHandle = function() {};

    Node.prototype.over = function() {
      var _base;

      if (typeof (_base = tools.current).over === "function") {
        _base.over(this);
      }
      layers.tool.drawNode(this, true);
      return console.log("in", this);
    };

    Node.prototype.out = function() {
      var _base;

      if (typeof (_base = tools.current).out === "function") {
        _base.out(this);
      }
      layers.tool.clear();
      return console.log("out", this);
    };

    return Node;

  })();

  Edge = (function() {
    function Edge(from, to) {
      this.from = from;
      this.to = to;
      this.line = L(this.from.pos, this.to.pos);
    }

    return Edge;

  })();

  Road = (function() {
    var defaults;

    defaults = {
      color: "#777"
    };

    function Road(edge, shape, opt) {
      this.edge = edge;
      this.shape = shape;
      this.opt = opt;
      this.opt = _.defaults(this.opt, defaults);
      this.draw();
    }

    Road.prototype.draw = function() {
      return layer.main["drawRoad" + this.shape](this);
    };

    return Road;

  })();

  root.ents = {};

  root.ents.Node = Node;

  root.nodes = [];

}).call(this);
